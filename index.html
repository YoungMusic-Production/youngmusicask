<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>YOUNG MUSIC | åŒ å¿ƒå®šåˆ¶æ„å‘ç¡®è®¤</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #000; color: #fff; height: 100vh; overflow: hidden; font-family: -apple-system, sans-serif; }

        .container { 
            display: flex; 
            flex-direction: column; 
            height: 100vh; 
            padding-top: 25px; 
        }

        header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 10px 15px; 
            border-bottom: 1px solid #1a1a1a; 
            background: #050505; 
            flex-shrink: 0;
        }

        .brand-name { font-size: 14px; font-weight: bold; }
        .brand-sub { font-size: 10px; color: #a855f7; display: block; }
        .undo-btn { font-size: 11px; color: #666; border: 1px solid #333; padding: 4px 10px; border-radius: 15px; cursor: pointer; }

        #chat-box { 
            flex: 1; 
            overflow-y: auto; 
            padding: 15px; 
            -webkit-overflow-scrolling: touch;
        }

        .bubble-wrapper { display: flex; margin-bottom: 15px; width: 100%; }
        .ai-row { justify-content: flex-start; }
        .user-row { justify-content: flex-end; }
        .bubble { max-width: 80%; padding: 10px 14px; font-size: 14px; line-height: 1.6; border-radius: 15px; }
        .bubble-ai { background: #1a1a1c; color: #ccc; border-bottom-left-radius: 4px; border: 1px solid #222; }
        .bubble-user { background: #a855f7; color: #fff; border-bottom-right-radius: 4px; }

        .interaction-area { 
            background: #050505; 
            padding-bottom: env(safe-area-inset-bottom); 
            border-top: 1px solid #111;
        }

        .options-container { padding: 15px; display: flex; flex-direction: column; gap: 8px; }
        .opt-btn { background: #111; padding: 15px; border-radius: 10px; border: 1px solid #222; cursor: pointer; }
        .opt-title { font-size: 14px; color: #fff; font-weight: bold; display: block; }
        .desc-tag { font-size: 11px; color: #666; display: block; margin-top: 3px; }

        .input-bar { display: flex; padding: 15px; gap: 10px; opacity: 0.3; transition: 0.3s; pointer-events: none; }
        .input-bar.active { opacity: 1; pointer-events: auto; }
        input { flex: 1; background: #1a1a1a; border: 1px solid #333; height: 40px; border-radius: 8px; padding: 0 15px; color: #fff; outline: none; }
        .send-btn { background: #a855f7; padding: 0 15px; line-height: 40px; border-radius: 8px; font-size: 13px; font-weight: bold; cursor: pointer; }

        #modal { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 99; padding: 20px; }
        .ticket { width: 100%; max-width: 350px; background: #000; border: 1px solid #333; padding: 25px; }
        .ticket-line { text-align: center; border-top: 1px solid #222; border-bottom: 1px solid #222; padding: 8px 0; font-size: 15px; font-weight: bold; margin-bottom: 20px; }
        .lab { font-size: 10px; color: #a855f7; display: block; text-transform: uppercase; }
        .val { font-size: 14px; font-weight: bold; margin-bottom: 10px; display: block; }
        .budget-area { background: rgba(168,85,247,0.1); border-left: 3px solid #a855f7; padding: 15px; margin: 15px 0; }
        .modal-btns { display: flex; gap: 10px; margin-top: 20px; }
        .btn { padding: 10px 20px; border-radius: 20px; font-size: 12px; cursor: pointer; font-weight: bold; text-align: center; flex: 1; }
        .btn-gray { background: #222; color: #fff; }
        .btn-purp { background: #a855f7; color: #fff; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div>
            <div class="brand-name">YOUNG MUSIC</div>
            <span class="brand-sub">Premium Bespoke Audio</span>
        </div>
        <div class="undo-btn" onclick="undo()">â†© æ’¤é”€</div>
    </header>

    <div id="chat-box"></div>

    <div class="interaction-area">
        <div id="options" class="options-container"></div>
        <div class="input-bar" id="input-bar">
            <input type="text" id="user-input" placeholder="è¯·å…ˆé€‰æ‹©ä¸Šæ–¹é€‰é¡¹...">
            <div class="send-btn" onclick="handleManual()">å‘é€</div>
        </div>
    </div>
</div>

<div id="modal">
    <div class="ticket">
        <div style="text-align: center; font-size: 30px; margin-bottom: 10px;">ğŸ¹</div>
        <div class="ticket-line">é¡¹ç›®å®šåˆ¶æ„å‘å•</div>
        <div id="ticket-content"></div>
        <div class="budget-area">
            <span class="lab">Intentional Budget</span>
            <span id="final-budget" style="font-size: 18px; font-weight: bold;"></span>
        </div>
        <div style="text-align: center; font-size: 12px; color: #a855f7; margin-top: 15px;">tingyangmusic@qq.com</div>
    </div>
    <div class="modal-btns">
        <div class="btn btn-gray" onclick="location.reload()">é‡æ–°å¼€å§‹</div>
        <div class="btn btn-purp" onclick="alert('è¯·æˆªå›¾æ­¤é¡µé¢å‘é€ç»™åˆ¶ä½œäºº')">ç¡®è®¤å¹¶è”ç³»</div>
    </div>
</div>

<script>
    const scenarios = [
        { q: "æ‚¨å¥½ï¼ŒYOUNG MUSICã€‚è¯·é€‰æ‹©åˆ¶ä½œæ¨¡å¼ï¼š", opts: [{ t: "ğŸ¨ åŒ å¿ƒÂ·å…¨æ‰‹å·¥åˆ›ä½œ", d: "æ‹’ç»æ¨¡ç‰ˆï¼Œè‰ºæœ¯ä¸Šé™æé«˜ã€‚" }, { t: "âš¡ AI æ™ºèƒ½è¾…åŠ©åˆ¶ä½œ", d: "æ€§ä»·æ¯”ä¹‹é€‰ã€‚" }, { t: "âŒ¨ï¸ è‡ªå®šä¹‰è¾“å…¥" }] },
        { q: "è¯·é€‰æ‹©æ‚¨å¿ƒä»ªçš„æ›²é£é£æ ¼ï¼š", opts: [{ t: "ğŸ¤ æµè¡Œ (Pop)" }, { t: "âš¡ ç”µå­ (EDM)" }, { t: "ğŸ§ å˜»å“ˆ / æ‘‡æ»š" }, { t: "ğŸ¹ æŠ’æƒ… / æ°›å›´" }, { t: "ğŸ® å›½é£ / ç®¡å¼¦" }, { t: "âŒ¨ï¸ æ‰‹åŠ¨è¾“å…¥" }] },
        { q: "æ˜¯å¦æœ‰å¯¹æ ‡æ¡ˆä¾‹ï¼Ÿ", opts: [{ t: "ğŸ” æš‚æ— å¯¹æ ‡", d: "ç”±åˆ¶ä½œäººè‡ªç”±å‘æŒ¥" }, { t: "âŒ¨ï¸ æ‰‹åŠ¨å¡«å†™è¦æ±‚", d: "è¾“å…¥æ›²åæˆ–å‚è€ƒé“¾æ¥" }] },
        { q: "æœ€åï¼Œç¡®å®šæ‚¨çš„å•†åŠ¡é¢„ç®—ï¼š", opts: [{ t: "ğŸ’° Â¥1000" }, { t: "ğŸ’ Â¥3000" }, { t: "ğŸ† Â¥10000+" }, { t: "âŒ¨ï¸ æ‰‹åŠ¨æŠ¥ä»·" }] }
    ];

    let step = 0; let answers = [];
    let isWaitingManual = false;
    const chatBox = document.getElementById('chat-box');
    const inputBar = document.getElementById('input-bar');
    const userInput = document.getElementById('user-input');

    function addChat(text, type) {
        const w = document.createElement('div');
        w.className = `bubble-wrapper ${type}-row`;
        w.innerHTML = `<div class="bubble bubble-${type}">${text}</div>`;
        chatBox.appendChild(w);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    function render() {
        const c = document.getElementById('options');
        c.innerHTML = '';
        if (step >= scenarios.length) return;

        if (isWaitingManual) {
            c.style.display = 'none';
            inputBar.classList.add('active');
            userInput.placeholder = "è¯·åœ¨æ­¤è¾“å…¥å¹¶ç‚¹å‡»å‘é€...";
            userInput.focus();
        } else {
            c.style.display = 'flex';
            inputBar.classList.remove('active');
            userInput.placeholder = "è¯·å…ˆé€‰æ‹©ä¸Šæ–¹é€‰é¡¹...";
            scenarios[step].opts.forEach(opt => {
                const b = document.createElement('div');
                b.className = 'opt-btn';
                b.innerHTML = `<span class="opt-title">${opt.t}</span>${opt.d ? `<span class="desc-tag">${opt.d}</span>` : ''}`;
                b.onclick = () => {
                    if (opt.t.includes('âŒ¨ï¸') || opt.t.includes('æ‰‹åŠ¨')) {
                        addChat(opt.t, 'user');
                        addChat("å¥½çš„ï¼Œè¯·åœ¨ä¸‹æ–¹è¾“å…¥æ¡†å†™ä¸‹å…·ä½“è¦æ±‚ï¼š", 'ai');
                        isWaitingManual = true;
                        render();
                    } else {
                        process(opt.t);
                    }
                };
                c.appendChild(b);
            });
        }
    }

    function handleManual() {
        const val = userInput.value.trim();
        if (!val) return;
        userInput.value = '';
        isWaitingManual = false;
        process(val);
    }

    function process(v) {
        if (!isWaitingManual) answers.push(v);
        addChat(v, 'user');
        step++;
        if (step < scenarios.length) {
            setTimeout(() => { addChat(scenarios[step].q, 'ai'); render(); }, 400);
        } else {
            setTimeout(showModal, 600);
        }
    }

    function showModal() {
        document.getElementById('modal').style.display = 'flex';
        document.getElementById('ticket-content').innerHTML = `
            <span class="lab">Mode & Style</span><span class="val">${answers
