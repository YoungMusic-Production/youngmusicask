<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>YOUNG MUSIC | åŒ å¿ƒå®šåˆ¶æ„å‘ç¡®è®¤</title>
    <style>
        /* æ ¸å¿ƒæ ·å¼ - ä¿æŒé»‘é‡‘é«˜çº§æ„Ÿ */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #000; color: #fff; height: 100vh; overflow: hidden; font-family: -apple-system, "SF Pro Display", sans-serif; }

        .container { 
            display: flex; 
            flex-direction: column; 
            height: 100vh; 
            padding-top: 25px; 
        }

        header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 10px 15px; 
            border-bottom: 1px solid #1a1a1a; 
            background: #050505; 
            flex-shrink: 0;
        }

        .header-brand { display: flex; align-items: center; gap: 10px; }
        .header-logo { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; background: #111; border: 1px solid #333; }
        .brand-name { font-size: 14px; font-weight: bold; letter-spacing: 1px; }
        .brand-sub { font-size: 10px; color: #a855f7; display: block; text-transform: uppercase; }
        .undo-btn { font-size: 11px; color: #666; border: 1px solid #333; padding: 4px 10px; border-radius: 15px; cursor: pointer; transition: 0.2s; }
        .undo-btn:active { background: #1a1a1a; color: #fff; }

        #chat-box { 
            flex: 1; 
            overflow-y: auto; 
            padding: 15px; 
            -webkit-overflow-scrolling: touch;
        }

        .bubble-wrapper { display: flex; margin-bottom: 15px; width: 100%; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        
        .ai-row { justify-content: flex-start; }
        .user-row { justify-content: flex-end; }
        .bubble { max-width: 85%; padding: 12px 16px; font-size: 14px; line-height: 1.6; border-radius: 18px; }
        .bubble-ai { background: #1a1a1c; color: #ccc; border-bottom-left-radius: 4px; border: 1px solid #222; }
        .bubble-user { background: #a855f7; color: #fff; border-bottom-right-radius: 4px; box-shadow: 0 4px 12px rgba(168, 85, 247, 0.2); }

        .interaction-area { 
            background: #050505; 
            padding-bottom: env(safe-area-inset-bottom); 
            border-top: 1px solid #111;
        }

        .options-container { padding: 15px; display: flex; flex-direction: column; gap: 8px; }
        .opt-btn { background: #111; padding: 15px; border-radius: 10px; border: 1px solid #222; cursor: pointer; transition: 0.2s; }
        .opt-btn:active { transform: scale(0.98); border-color: #a855f7; }
        .opt-title { font-size: 14px; color: #fff; font-weight: bold; display: block; }
        .desc-tag { font-size: 11px; color: #666; display: block; margin-top: 3px; }

        .input-bar { display: flex; padding: 15px; gap: 10px; opacity: 0.3; transition: 0.3s; pointer-events: none; }
        .input-bar.active { opacity: 1; pointer-events: auto; }
        input { flex: 1; background: #1a1a1a; border: 1px solid #333; height: 42px; border-radius: 8px; padding: 0 15px; color: #fff; outline: none; font-size: 14px; }
        .send-btn { background: #a855f7; padding: 0 20px; line-height: 42px; border-radius: 8px; font-size: 13px; font-weight: bold; cursor: pointer; }

        /* æœ€ç»ˆæ„å‘å•å¼¹çª— */
        #modal { position: fixed; inset: 0; background: rgba(0,0,0,0.98); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 99; padding: 20px; }
        .ticket { width: 100%; max-width: 350px; background: #000; border: 1px solid #333; padding: 25px; position: relative; }
        .ticket-logo { width: 50px; height: 50px; display: block; margin: 0 auto 15px; border-radius: 50%; }
        .ticket-line { text-align: center; border-top: 1px solid #222; border-bottom: 1px solid #222; padding: 10px 0; font-size: 16px; font-weight: bold; margin-bottom: 20px; letter-spacing: 2px; }
        .lab { font-size: 10px; color: #a855f7; display: block; text-transform: uppercase; margin-bottom: 2px; font-weight: bold; }
        .val { font-size: 14px; font-weight: bold; margin-bottom: 15px; display: block; color: #fff; }
        .budget-area { background: rgba(168, 85, 247, 0.1); border-left: 4px solid #a855f7; padding: 15px; margin: 15px 0; }
        
        .modal-btns { display: flex; gap: 12px; margin-top: 25px; width: 100%; max-width: 350px; }
        .btn { padding: 14px 20px; border-radius: 25px; font-size: 13px; cursor: pointer; font-weight: bold; text-align: center; flex: 1; transition: 0.2s; }
        .btn-gray { background: #222; color: #fff; }
        .btn-purp { background: #a855f7; color: #fff; box-shadow: 0 4px 15px rgba(168, 85, 247, 0.3); }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div class="header-brand">
            <img src="logo.png" class="header-logo" alt="Logo" onerror="this.style.display='none'">
            <div>
                <div class="brand-name">YOUNG MUSIC</div>
                <span class="brand-sub">Premium Bespoke Audio</span>
            </div>
        </div>
        <div class="undo-btn" onclick="undo()">â†© æ’¤é”€</div>
    </header>

    <div id="chat-box"></div>

    <div class="interaction-area">
        <div id="options" class="options-container"></div>
        <div class="input-bar" id="input-bar">
            <input type="text" id="user-input" placeholder="è¯·é€‰æ‹©ä¸Šæ–¹é€‰é¡¹æˆ–æ‰‹åŠ¨è¾“å…¥...">
            <div class="send-btn" onclick="handleManual()">å‘é€</div>
        </div>
    </div>
</div>

<div id="modal">
    <div class="ticket">
        <img src="logo.png" class="ticket-logo" alt="Logo" onerror="this.innerHTML='ğŸ¹'">
        <div class="ticket-line">é¡¹ç›®å®šåˆ¶æ„å‘å•</div>
        <div id="ticket-content"></div>
        <div class="budget-area">
            <span class="lab">Intentional Budget</span>
            <span id="final-budget" style="font-size: 20px; font-weight: bold; color: #fff;"></span>
        </div>
        <div style="text-align: center; font-size: 12px; color: #a855f7; margin-top: 20px; border-top: 1px dashed #222; padding-top:15px;">
            tingyangmusic@qq.com
        </div>
    </div>
    <div class="modal-btns">
        <div class="btn btn-gray" onclick="location.reload()">é‡æ–°å¼€å§‹</div>
        <div class="btn btn-purp" onclick="alert('è¯·æˆªå›¾å‘é€é‚®ä»¶ï¼Œå¦‚æœæ„å‘æˆç«‹ï¼Œæˆ‘ä»¬å°†å°½å¿«ä¸ºæ‚¨å¯¹æ¥ã€‚')">ç¡®è®¤å¹¶è”ç³»</div>
    </div>
</div>

<script>
    // 1. å®šä¹‰å¯¹è¯æµç¨‹ï¼ˆå…¨å®¶æ¡¶ç‰ˆï¼šå«ç‰ˆæƒé€‰é¡¹ï¼‰
    const scenarios = [
        { q: "æ‚¨å¥½ï¼Œæ¬¢è¿æ¥åˆ° YOUNG MUSICã€‚è¯·é€‰æ‹©æ‚¨éœ€è¦çš„åˆ¶ä½œæ¨¡å¼ï¼š", opts: [{ t: "ğŸ¨ åŒ å¿ƒÂ·å…¨æ‰‹å·¥åˆ›ä½œ", d: "æ‹’ç»æ¨¡ç‰ˆï¼Œè‰ºæœ¯ä¸Šé™æé«˜ã€‚" }, { t: "âš¡ AI æ™ºèƒ½è¾…åŠ©åˆ¶ä½œ", d: "æ€§ä»·æ¯”ä¹‹é€‰ï¼Œå¿«é€Ÿäº¤ä»˜ã€‚" }, { t: "âŒ¨ï¸ è‡ªå®šä¹‰æ¨¡å¼" }] },
        { q: "è¯·é€‰æ‹©æ‚¨å¿ƒä»ªçš„æ›²é£é£æ ¼ï¼š", opts: [{ t: "ğŸ¤ æµè¡Œ (Pop)" }, { t: "âš¡ ç”µå­ (EDM)" }, { t: "ğŸ§ å˜»å“ˆ / æ‘‡æ»š" }, { t: "ğŸ¹ æŠ’æƒ… / æ°›å›´" }, { t: "ğŸ® å›½é£ / ç®¡å¼¦" }, { t: "âŒ¨ï¸ æ‰‹åŠ¨è¾“å…¥é£æ ¼" }] },
        { q: "æ˜¯å¦æœ‰å¯¹æ ‡æ¡ˆä¾‹æˆ–å‚è€ƒé“¾æ¥ï¼Ÿ", opts: [{ t: "ğŸ” æš‚æ— å¯¹æ ‡", d: "ç”±åˆ¶ä½œäººè‡ªç”±å‘æŒ¥åˆ›ä½œ" }, { t: "âŒ¨ï¸ æ‰‹åŠ¨å¡«å†™è¦æ±‚", d: "è¯·è¾“å…¥æ›²åæˆ–å‚è€ƒé“¾æ¥" }] },
        { q: "è¯·é€‰æ‹©æ‚¨å¿ƒä»ªçš„ä½œå“æƒç›Šæ–¹æ¡ˆï¼š", opts: [{ t: "ğŸ‘‘ ç‰ˆæƒä¹°æ–­", d: "å•†ç”¨å…¨æƒç›Šï¼Œç‹¬å®¶æ‹¥æœ‰" }, { t: "ğŸ¤ éä¹°æ–­æˆæƒ", d: "ä»·æ ¼äº²æ°‘ï¼Œä¿ç•™è‘—ä½œæƒ" }, { t: "âŒ¨ï¸ å¦è¡Œåå•†æ–¹æ¡ˆ" }] },
        { q: "æœ€åï¼Œè¯·ç¡®å®šæ‚¨çš„å•†åŠ¡é¢„ç®—åŒºé—´ï¼š", opts: [{ t: "ğŸ’° Â¥1000" }, { t: "ğŸ’ Â¥3000" }, { t: "ğŸ† Â¥10000+" }, { t: "âŒ¨ï¸ æ‰‹åŠ¨æŠ¥ä»·" }] }
    ];

    let step = 0; let answers = [];
    let isWaitingManual = false;
    const chatBox = document.getElementById('chat-box');
    const inputBar = document.getElementById('input-bar');
    const userInput = document.getElementById('user-input');

    function addChat(text, type) {
        const w = document.createElement('div');
        w.className = `bubble-wrapper ${type}-row`;
        w.innerHTML = `<div class="bubble bubble-${type}">${text}</div>`;
        chatBox.appendChild(w);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    function render() {
        const c = document.getElementById('options');
        c.innerHTML = '';
        if (step >= scenarios.length) return;

        // å¦‚æœæ˜¯æ‰‹åŠ¨è¾“å…¥æ¨¡å¼
        if (isWaitingManual) {
            c.style.display = 'none';
            inputBar.classList.add('active');
            userInput.placeholder = "è¯·åœ¨æ­¤è¾“å…¥å¹¶ç‚¹å‡»å‘é€...";
            userInput.focus();
        } else {
            c.style.display = 'flex';
            inputBar.classList.remove('active');
            userInput.placeholder = "è¯·å…ˆé€‰æ‹©ä¸Šæ–¹é€‰é¡¹...";
            scenarios[step].opts.forEach(opt => {
                const b = document.createElement('div');
                b.className = 'opt-btn';
                b.innerHTML = `<span class="opt-title">${opt.t}</span>${opt.d ? `<span class="desc-tag">${opt.d}</span>` : ''}`;
                b.onclick = () => {
                    // è¯†åˆ«æ‰‹åŠ¨è¾“å…¥å…³é”®å­—
                    if (opt.t.includes('âŒ¨ï¸') || opt.t.includes('æ‰‹åŠ¨') || opt.t.includes('åå•†')) {
                        addChat(opt.t, 'user');
                        addChat("å¥½çš„ï¼Œè¯·åœ¨ä¸‹æ–¹å†™ä¸‹æ‚¨çš„å…·ä½“è¦æ±‚ï¼š", 'ai');
                        isWaitingManual = true;
                        render();
                    } else {
                        process(opt.t);
                    }
                };
                c.appendChild(b);
            });
        }
    }

    function handleManual() {
        const val = userInput.value.trim();
        if (!val) return;
        userInput.value = '';
        isWaitingManual = false;
        process(val);
    }

    function process(v) {
        answers.push(v);
        // å¦‚æœä¸æ˜¯æ‰‹åŠ¨æ¨¡å¼è¿‡æ¥çš„ï¼ˆæ‰‹åŠ¨æ¨¡å¼åœ¨ä¸Šé¢å·²ç» addChat è¿‡äº†ï¼‰
        if (!isWaitingManual) {
            addChat(v, 'user');
        }
        
        step++;
        if (step < scenarios.length) {
            setTimeout(() => { 
                addChat(scenarios[step].q, 'ai'); 
                render(); 
            }, 400);
        } else {
            setTimeout(showModal, 600);
        }
    }

    function showModal() {
        document.getElementById('modal').style.display = 'flex';
        document.getElementById('ticket-content').innerHTML = `
            <span class="lab">Production / Style</span><span class="val">${answers[0]} Â· ${answers[1]}</span>
            <span class="lab">Requirement / Ref</span><span class="val">${answers[2]}</span>
            <span class="lab">Rights Plan</span><span class="val">${answers[3]}</span>
        `;
        document.getElementById('final-budget').innerText = "æ„å‘: " + (answers[4] || 'å¦è®®');
    }

    function undo() { 
        if (step > 0 && answers.length > 0) { 
            step--; 
            answers.pop(); 
            // ç§»é™¤æœ€åä¸¤æ¡æ°”æ³¡ï¼ˆç”¨æˆ·çš„ä¸€æ¡ï¼ŒAIçš„ä¸€æ¡ï¼‰
            chatBox.removeChild(chatBox.lastChild); 
            chatBox.removeChild(chatBox.lastChild); 
            isWaitingManual = false;
            render(); 
        } 
    }

    // é¡µé¢åŠ è½½å¯åŠ¨
    window.onload = () => { 
        addChat(scenarios[0].q, 'ai'); 
        render(); 
    };
</script>
</body>
</html>
