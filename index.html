<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YOUNG MUSIC | åŒ å¿ƒåŸåˆ›å•†åŠ¡å®šåˆ¶</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root { --primary: #a855f7; --bg: #050505; }
        body { background-color: var(--bg); color: #e5e5e5; font-family: -apple-system, sans-serif; height: 100vh; overflow: hidden; }
        .bubble { max-width: 85%; padding: 14px 18px; border-radius: 20px; font-size: 14px; line-height: 1.6; margin-bottom: 12px; animation: slideUp 0.3s ease-out; }
        .bubble-ai { background: #1a1a1c; color: #d4d4d8; border-bottom-left-radius: 4px; border: 1px solid #333; }
        .bubble-user { background: var(--primary); color: white; border-bottom-right-radius: 4px; align-self: flex-end; }
        .opt-btn { background: #18181b; border: 1px solid #27272a; padding: 12px; border-radius: 12px; font-size: 13px; cursor: pointer; transition: all 0.2s; color: #a1a1aa; text-align: left; }
        .opt-btn:hover { background: var(--primary); border-color: white; color: white; transform: translateY(-2px); }
        .desc-tag { font-size: 10px; opacity: 0.5; margin-top: 4px; display: block; line-height: 1.3; }
        .nav-btn { font-size: 10px; border: 1px solid rgba(255,255,255,0.1); padding: 4px 10px; border-radius: 99px; transition: all 0.2s; color: #666; }
        .nav-btn.active { color: #fff; border-color: rgba(255,255,255,0.3); }
        .warning-text { color: #f87171; font-size: 10px; font-weight: bold; margin-bottom: 8px; display: block; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        #modal-overlay { background: rgba(0,0,0,0.98); backdrop-filter: blur(20px); }
        .ticket-bg { background: #000; border: 1px solid #333; box-shadow: 0 0 60px rgba(168,85,247,0.3); }
    </style>
</head>
<body class="flex justify-center items-center p-4">

    <div class="w-full max-w-5xl h-[95vh] flex gap-6">
        <div class="flex-1 flex flex-col bg-neutral-900 rounded-3xl border border-white/10 overflow-hidden shadow-2xl">
            <div class="p-5 border-b border-white/5 flex items-center justify-between bg-black/20">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-xl bg-purple-600 flex items-center justify-center font-black italic text-white shadow-lg text-lg">YM</div>
                    <div>
                        <h2 class="font-bold text-sm text-white uppercase tracking-wider">YOUNG MUSIC</h2>
                        <p class="text-[9px] text-purple-400 font-mono tracking-widest uppercase italic text-xs">Professional Creation Portal</p>
                    </div>
                </div>
                <div class="flex gap-2">
                    <button id="undo-btn" onclick="undo()" class="nav-btn">â†© æ’¤é”€</button>
                    <button id="redo-btn" onclick="redo()" class="nav-btn">å‰è¿› â†ª</button>
                </div>
            </div>

            <div id="chat-box" class="flex-1 overflow-y-auto p-6 flex flex-col space-y-4"></div>
            
            <div id="options-container" class="px-6 py-4 bg-black/40 border-t border-white/5">
                <div id="warning-area"></div>
                <div id="options-area" class="grid grid-cols-2 md:grid-cols-3 gap-3 max-h-[260px] overflow-y-auto"></div>
            </div>

            <div class="p-5 bg-black/30 border-t border-white/5">
                <form onsubmit="handleManual(event)" class="flex gap-2">
                    <input id="user-input" type="text" placeholder="è¾“å…¥éœ€æ±‚ç»†èŠ‚æˆ–å¯¹æ ‡å‚è€ƒ..." class="flex-1 bg-white/5 border border-white/10 rounded-xl px-5 py-4 text-sm focus:outline-none focus:border-purple-500 text-white transition-all">
                    <button type="submit" class="bg-purple-600 hover:bg-purple-500 text-white font-bold px-8 rounded-xl">ç¡®è®¤</button>
                </form>
            </div>
        </div>
    </div>

    <div id="modal-overlay" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4">
        <div class="flex flex-col items-center gap-6">
            <div id="final-sheet" class="ticket-bg w-[420px] p-10 text-white rounded-sm relative overflow-hidden">
                <div class="flex justify-between border-b border-white/20 pb-6 mb-8 font-black text-2xl tracking-tighter">
                    YOUNG MUSIC <span class="text-[9px] font-mono opacity-30 italic">SN:<span id="sheet-id"></span></span>
                </div>
                <div class="space-y-4 text-sm">
                    <div><p class="text-[9px] text-purple-400 uppercase tracking-widest mb-1">åˆ¶ä½œæ¨¡å¼ / é£æ ¼</p><p id="s-mode-vibe" class="font-bold text-xs"></p></div>
                    <div class="p-2 bg-white/5 rounded border border-white/10"><p class="text-[9px] text-gray-500 mb-1 italic">å¯¹æ ‡æ¡ˆä¾‹ Reference</p><p id="s-ref" class="text-xs font-medium"></p></div>
                    <div class="grid grid-cols-2 gap-4 border-y border-white/5 py-3 mt-2">
                        <div><p class="text-[9px] text-gray-500 mb-1">æ—¶é•¿/åè®®</p><p id="s-misc" class="font-bold text-[10px]"></p></div>
                        <div><p class="text-[9px] text-gray-500 mb-1">çº¦å®šä¿®æ”¹æ¬¡æ•°</p><p id="s-revisions" class="font-bold text-[10px]"></p></div>
                    </div>
                    <div><p class="text-[9px] text-gray-500 mb-1">åˆ›ä½œé…ç½® (é¢„ç®—ç›¸å…³)</p><p id="s-inst" class="font-bold text-blue-400 text-xs"></p></div>
                    <div class="p-4 bg-purple-900/10 border-l-4 border-purple-600"><p class="text-[9px] text-purple-400 mb-1">æ„å‘é¢„ç®—èŒƒå›´</p><p id="s-budget" class="text-base font-black"></p></div>
                </div>
                <div class="mt-8 pt-4 border-t border-white/10">
                    <p class="text-[9px] text-red-400/80 leading-relaxed italic">* å¤‡æ³¨ï¼šæ­¤å•æ®ä»…ä½œä¸ºé¡¹ç›®å®šåˆ¶æ„å‘è®°å½•ã€‚æœ€ç»ˆåˆä½œæˆåŠŸä¸å¦ã€å…·ä½“äº¤ä»˜å‘¨æœŸåŠæ ¸ç®—æŠ¥ä»·ï¼Œå‡ä»¥ YOUNG MUSIC å·¥ä½œå®¤çš„æ­£å¼åé¦ˆä¸ºå‡†ã€‚</p>
                </div>
                <div class="mt-6 text-[8px] opacity-20 text-center italic tracking-[0.4em]">HANDCRAFTED BY TING YOUNG MUSIC STUDIO</div>
            </div>
            <div class="flex flex-col items-center gap-3">
                <div class="flex gap-4">
                    <button onclick="download()" class="px-8 py-3 bg-neutral-800 text-white rounded-full text-sm">ä¿å­˜æ„å‘å•</button>
                    <button onclick="sendEmail()" class="px-10 py-3 bg-purple-600 text-white font-bold rounded-full text-sm shadow-xl">ğŸ“§ å‘é€è‡³ tingyangmusic@qq.com</button>
                </div>
                <p class="text-[10px] text-gray-500 italic text-xs">å®˜æ–¹é‚®ç®±: tingyangmusic@qq.com</p>
            </div>
        </div>
    </div>

    <script>
        let step = 0;
        let answers = [];
        let redoStack = [];
        const config = { sheetId: Math.floor(Math.random()*90000 + 10000) };
        const myEmail = "tingyangmusic@qq.com";
        const box = document.getElementById('chat-box');
        const optArea = document.getElementById('options-area');
        const warnArea = document.getElementById('warning-area');
        const input = document.getElementById('user-input');

        const scenarios = [
            { 
                q: "æ‚¨å¥½ï¼Œæ¬¢è¿æ¥åˆ° YOUNG MUSICã€‚è¯·é€‰æ‹©æœ¬æ¬¡ä½œå“çš„**åˆ¶ä½œæ¨¡å¼**ï¼š", 
                opts: ["ğŸ¨ åŒ å¿ƒÂ·å…¨æ‰‹å·¥åˆ›ä½œ", "âš¡ AI æ™ºèƒ½è¾…åŠ©åˆ¶ä½œ", "âŒ¨ï¸ æ‰‹åŠ¨è¾“å…¥å®šåˆ¶éœ€æ±‚"] 
            },
            { 
                q: "è¯·é€‰æ‹©æ‚¨å¿ƒä»ªçš„**åˆ›ä½œæ›²é£**å®šä½ï¼š", 
                opts: ["ğŸ¤ æµè¡Œ (Pop)", "ğŸ¹ æŠ’æƒ…é’¢ç´", "ğŸ§ å˜»å“ˆ (Hip-Hop)", "ğŸ”¥ æ‘‡æ»š (Rock)", "ğŸ•º ç”µå­ (EDM)", "ğŸ® ä¸œæ–¹å›½é£", "ğŸ» ç®¡å¼¦é…ä¹", "ğŸ™ æ°›å›´/å†¥æƒ³", "ğŸ¸ æ°‘è°£ (Folk)", "âŒ¨ï¸ æ‰‹åŠ¨è¾“å…¥"] 
            },
            { 
                q: "å…³é”®ä¸€æ­¥ï¼šæ˜¯å¦æœ‰**å¯¹æ ‡æ¡ˆä¾‹ (Reference)**ï¼Ÿ", 
                warn: "ğŸ’¡ æç¤ºï¼šæä¾›æ‚¨å–œæ¬¢çš„æ›²åã€è‰ºäººæˆ–é“¾æ¥ï¼Œèƒ½å¤§å¹…å‡å°‘æ²Ÿé€šæˆæœ¬ï¼Œç¡®ä¿æˆå“ç²¾å‡†ã€‚",
                opts: ["âœï¸ æ‰‹åŠ¨å¡«å†™å‚è€ƒæ›²ç›®/é“¾æ¥", "ğŸ” æš‚æ— å¯¹æ ‡ï¼Œç”±åˆ¶ä½œäººå®šå¤º"] 
            },
            { 
                q: "ä½œå“çš„**æ—¶é•¿è§„æ ¼**ï¼š", 
                opts: ["30s å•†ä¸šç‰‡æ®µ", "2min ç²¾ç®€ç‰ˆ", "3:30 æ ‡å‡†å®Œæ•´ç‰ˆ", "âŒ¨ï¸ è‡ªå®šä¹‰æ—¶é•¿"] 
            },
            { 
                q: "éŸ³è‰²åŠå®å½•**è‰ºæœ¯é…ç½®**ï¼š", 
                warn: "âš ï¸ æé†’ï¼šæ­¤é¡¹é…ç½®ç›´æ¥æ¶‰åŠä¹æ‰‹/å½•éŸ³æ£šæˆæœ¬ï¼Œå°†ä¸æœ€ç»ˆå•†åŠ¡é¢„ç®—ç›´æ¥æŒ‚é’©ã€‚",
                opts: ["ğŸ¹ å…¨ç²¾å“ MIDI åˆ›ä½œ", "ğŸ¸ çœŸå®ä¹å™¨å®å½•", "ğŸ» å¤§å¸ˆçº§ç¼–åˆ¶", "âŒ¨ï¸ å¤‡æ³¨ç‰¹æ®Šè¦æ±‚"] 
            },
            { 
                q: "é¢„è®¾çš„**ä¿®æ”¹ä¿éšœæ¬¡æ•°**ï¼Ÿ", 
                opts: ["1æ¬¡ åŸºç¡€ä¿®æ­£", "2-3æ¬¡ æ ‡å‡†ç»´æŠ¤", "âœï¸ å¡«å†™è‡ªå®šä¹‰æ¬¡æ•°"] 
            },
            { 
                q: "å…³äº**ä½œå“æƒç›Šæˆæƒ**æ–¹æ¡ˆï¼š", 
                opts: [
                    "ğŸ‘‘ **ç‰ˆæƒä¹°æ–­ (é™¤ç½²åæƒå¤–)**\n<span class='desc-tag'>è‘—ä½œæƒè´¢äº§æƒå®Œæ•´è½¬è®©ï¼Œæ”¯æŒå…¨æ¸ é“å•†ä¸šç”¨é€”ã€‚</span>", 
                    "ğŸ¤ **éä¹°æ–­æˆæƒæ¨¡å¼**\n<span class='desc-tag'>æ‚¨å¯ä»¥æ‹¥æœ‰æ‚¨æ‰€éœ€è¦çš„æ‰€æœ‰æˆæƒã€‚</span>", 
                    "âŒ¨ï¸ å¦è¡Œåå•†æ¡æ¬¾"
                ] 
            },
            { 
                q: "æœ€åï¼Œè¯·ç¡®å®šæ‚¨çš„**å•†åŠ¡é¢„ç®—æ¡£ä½**ï¼š", 
                opts: ["ğŸ’° Â¥500 (å»ºè®®AIé¡¹ç›®)", "ğŸ’ Â¥3000 (å»ºè®®æ‰‹å·¥åˆ›ä½œ)", "ğŸ† Â¥10000+ (æ——èˆ°å®šåˆ¶)", "âŒ¨ï¸ å¦è¡Œé¢è°ˆ"] 
            }
        ];

        window.onload = () => { document.getElementById('sheet-id').innerText = config.sheetId; refreshUI(); };

        function refreshUI() {
            box.innerHTML = "";
            for (let i = 0; i < step; i++) {
                addBubble(scenarios[i].q, 'ai');
                addBubble(answers[i], 'user');
            }
            if (step < scenarios.length) {
                aiSay(scenarios[step].q);
                warnArea.innerHTML = scenarios[step].warn ? `<span class="warning-text">${scenarios[step].warn}</span>` : "";
                renderOpts(scenarios[step].opts);
            } else {
                aiSay("æ„å‘å•å·²ç”Ÿæˆï¼Œæ­£ä¸ºæ‚¨è·³è½¬é¢„è§ˆ...");
                setTimeout(showSheet, 800);
            }
            document.getElementById('undo-btn').className = step > 0 ? "nav-btn active" : "nav-btn";
            document.getElementById('redo-btn').className = redoStack.length > 0 ? "nav-btn active" : "nav-btn";
        }

        function handleLogic(val) { answers.push(val); redoStack = []; step++; refreshUI(); }
        function undo() { if (step > 0) { redoStack.push(answers.pop()); step--; refreshUI(); } }
        function redo() { if (redoStack.length > 0) { answers.push(redoStack.pop()); step++; refreshUI(); } }

        function renderOpts(opts) {
            optArea.innerHTML = "";
            opts.forEach(o => {
                const btn = document.createElement('button'); btn.className = "opt-btn"; btn.innerHTML = o;
                btn.onclick = () => { 
                    if(o.includes("âŒ¨ï¸") || o.includes("æ‰‹åŠ¨") || o.includes("âœï¸")) { 
                        aiSay("è¯·è¯¦ç»†è¯´æ˜ï¼š"); input.focus(); 
                    } else {
                        const clean = o.replace(/<[^>]+>/g, '').split('\n')[0].trim();
                        handleLogic(clean); 
                    }
                };
                optArea.appendChild(btn);
            });
        }

        function handleManual(e) {
            e.preventDefault(); const val = input.value.trim(); if(!val) return;
            handleLogic(val); input.value = "";
        }

        function showSheet() {
            document.getElementById('s-mode-vibe').innerText = answers[0] + " / " + answers[1];
            document.getElementById('s-ref').innerText = answers[2];
            document.getElementById('s-misc').innerText = answers[3] + " / " + answers[6];
            document.getElementById('s-revisions').innerText = answers[5];
            document.getElementById('s-inst').innerText = answers[4];
            document.getElementById('s-budget').innerText = answers[7];
            document.getElementById('modal-overlay').classList.remove('hidden');
        }

        function aiSay(txt) { addBubble(txt, 'ai'); }
        function addBubble(txt, type) {
            const d = document.createElement('div'); d.className = `bubble bubble-${type} ${type==='user'?'ml-auto':''}`; d.innerText = txt;
            box.appendChild(d); box.scrollTop = box.scrollHeight;
        }
        function download() {
            html2canvas(document.getElementById('final-sheet'), { scale: 3, backgroundColor: "#000" }).then(canvas => {
                const a = document.createElement('a'); a.download = `YM_Order_${config.sheetId}.png`; a.href = canvas.toDataURL(); a.click();
            });
        }
        function sendEmail() {
            const subject = encodeURIComponent(`å®šåˆ¶æ„å‘-SN:${config.sheetId}`);
            const body = encodeURIComponent(`æ„å‘æ±‡æ€»ï¼š\nå¯¹æ ‡ï¼š${answers[2]}\næ¨¡å¼ï¼š${answers[0]}\né£æ ¼ï¼š${answers[1]}\nè§„æ ¼/ç‰ˆæƒï¼š${answers[3]}/${answers[6]}\né…ç½®ï¼š${answers[4]}\nä¿®æ”¹ï¼š${answers[5]}\né¢„ç®—ï¼š${answers[7]}`);
            window.open(`mailto:${myEmail}?subject=${subject}&body=${body}`);
        }
    </script>
</body>
</html>